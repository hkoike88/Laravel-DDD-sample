# UC-001-003: 職員アカウント作成

最終更新: 2025-12-26

---

## 基本情報

| 項目 | 値 |
|------|-----|
| ユースケースID | UC-001-003 |
| ユースケース名 | 職員アカウント作成 |
| アクター | 管理者 |
| 関連Epic | - |
| 関連課題 | - |
| ステータス | Planned |

---

## 概要

管理者が新しい職員アカウントを作成する。職員の基本情報と権限を設定し、システムへのアクセスを可能にする。

---

## 事前条件

- 管理者がシステムにログイン済みであること
- 管理者権限を持っていること

---

## 事後条件

- 新しい職員アカウントが作成される
- 初期パスワードが設定される（または招待メールが送信される）
- 職員がシステムにログイン可能になる

---

## 基本フロー

1. 管理者が職員アカウント管理画面を開く
2. 管理者が「新規作成」ボタンをクリックする
3. システムが職員情報入力フォームを表示する
4. 管理者が職員情報を入力する
   - 氏名
   - メールアドレス
   - 権限（一般職員/管理者）
5. 管理者が「作成」ボタンをクリックする
6. システムが入力内容を検証する
7. システムが職員アカウントを作成する
8. システムが初期パスワードを生成する
9. システムが職員一覧画面にリダイレクトする
10. システムが「職員アカウントを作成しました」と表示する

---

## 代替フロー

### 6a. メールアドレスが既に登録されている場合

1. システムが「このメールアドレスは既に登録されています」とエラーを表示する
2. 管理者がメールアドレスを修正する
3. 基本フロー5に戻る

### 6b. 必須項目が未入力の場合

1. システムが未入力項目にエラーを表示する
2. 管理者が必須項目を入力する
3. 基本フロー5に戻る

### 8a. 招待メール送信を選択した場合

1. システムが招待メールを職員に送信する
2. 職員が招待メールのリンクからパスワードを設定する

---

## ビジネスルール

| ルールID | ルール内容 |
|----------|-----------|
| BR-UC001-03-01 | メールアドレスはシステム内で一意であること |
| BR-UC001-03-02 | 初期パスワードはセキュリティ要件を満たすランダム文字列 |
| BR-UC001-03-03 | 初回ログイン時にパスワード変更を強制する |
| BR-UC001-03-04 | 管理者権限の付与は既存管理者のみ可能 |

---

## 非機能要件

| 項目 | 要件 |
|------|------|
| パフォーマンス | アカウント作成は3秒以内に完了する |
| セキュリティ | 初期パスワードは暗号化して保存 |
| 監査 | アカウント作成操作をログに記録する |

---

## 画面イメージ（概要）

### 入力フォーム
- 氏名（必須）
- メールアドレス（必須）
- 権限選択（一般職員/管理者）
- 初期パスワード設定方法（自動生成/招待メール）

### ボタン
- 作成ボタン
- キャンセルボタン

---

## 入力項目

| 項目 | 必須 | 形式 | 備考 |
|------|:----:|------|------|
| 氏名 | ○ | 文字列（50文字以内） | 姓名をスペース区切り |
| メールアドレス | ○ | メール形式 | 一意制約あり |
| 権限 | ○ | 選択 | 一般職員/管理者 |

---

## 関連ユースケース

| ユースケース | 関係 |
|-------------|------|
| UC-001-001_職員ログイン | 作成したアカウントでログイン |
| UC-001-004_職員アカウント編集 | 作成後の編集 |
| UC-001-005_職員アカウント無効化 | 作成後の無効化 |

---

## 技術実装メモ

- API エンドポイント: POST /api/staff/accounts
- パスワード生成: 16文字のランダム文字列
- パスワードハッシュ: bcrypt (cost=12)
- 監査ログ: security チャンネルに記録

---

## 関連ドキュメント

- [セキュリティ標準 - パスワードポリシー](../../../../00_docs/20_tech/99_standard/security/01_PasswordPolicy.md)
