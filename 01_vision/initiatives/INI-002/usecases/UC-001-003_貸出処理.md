# UC-001-003: 貸出処理

最終更新: 2025-12-24

---

## 基本情報

| 項目 | 値 |
|------|-----|
| ユースケースID | UC-001-003 |
| ユースケース名 | 貸出処理 |
| アクター | 図書館職員 |
| 関連Epic | EP-02（貸出・返却） |
| 関連課題 | ISS-002, ISS-003 |
| ステータス | Planned |

---

## 概要

職員が利用者に図書を貸し出す処理を行う。貸出上限・延滞状況を自動チェックし、返却期限を設定する。

---

## 事前条件

- 職員がログインしていること
- 利用者の利用者カードが有効であること
- 貸出対象の図書が「貸出可」状態であること

---

## 事後条件

- 図書の所蔵状態が「貸出中」に更新される
- 貸出記録が作成される（利用者ID、図書ID、貸出日、返却期限）
- 利用者の現在貸出冊数が更新される

---

## 基本フロー

1. 職員が利用者カード番号を入力する
2. システムが利用者情報を表示する
3. システムが利用者の貸出状況（現在の貸出冊数、延滞有無）を表示する
4. 職員が貸出図書のバーコード/ISBNを入力する
5. システムが貸出上限をチェックする
6. システムが返却期限を自動計算する（貸出日から14日後）
7. システムが貸出処理を実行し、完了メッセージを表示する
8. 職員が返却期限を利用者に伝える

---

## 代替フロー

### 3a. 利用者が延滞中の場合

1. システムが「延滞中のため貸出不可」と警告を表示する
2. 職員が利用者に延滞図書の返却を促す
3. ユースケース終了

### 5a. 貸出上限に達している場合

1. システムが「貸出上限（5冊）に達しています」と警告を表示する
2. 職員が利用者に説明する
3. ユースケース終了

### 4a. 図書が予約されている場合

1. システムが「この図書は他の利用者が予約しています」と警告を表示する
2. 職員が別の図書を案内する
3. ユースケース終了

---

## ビジネスルール

| ルールID | ルール内容 |
|----------|-----------|
| BR-UC003-01 | 貸出上限は1人5冊まで |
| BR-UC003-02 | 貸出期間は14日間 |
| BR-UC003-03 | 延滞中は新規貸出不可 |
| BR-UC003-04 | 予約者以外への貸出は不可（予約がある場合） |

---

## 非機能要件

| 項目 | 要件 |
|------|------|
| パフォーマンス | 貸出処理は1分以内に完了する（現状5分→1分に80%短縮） |
| 可用性 | 図書館開館時間中は利用可能 |
| 信頼性 | 貸出記録は確実に保存される |

---

## 画面イメージ（概要）

- 利用者カード番号入力フィールド
- 利用者情報表示エリア（名前、現在貸出冊数、延滞状況）
- 図書バーコード入力フィールド
- 貸出確認・実行ボタン
- 返却期限表示

---

## 関連ドキュメント

- [課題分析 ISS-002](../../../../00_docs/10_business/asis/pain-points/issues-analysis.md#iss-002-貸出処理でのミスが発生)
- [課題分析 ISS-003](../../../../00_docs/10_business/asis/pain-points/issues-analysis.md#iss-003-貸出上限確認に時間がかかる)
- [AS-IS業務フロー 貸出処理](../../../../00_docs/10_business/asis/swimlane/lending-process.md)
