# UC-000-002: バックエンド初期設定

最終更新: 2025-12-23

---

## 概要

Laravel 11.x プロジェクトを作成し、DDD アーキテクチャに基づいたディレクトリ構成、必要なパッケージのインストール、基本設定を完了する。

---

## アクター

| アクター | 役割 |
|----------|------|
| 開発者 | バックエンド環境をセットアップする |

---

## 事前条件

- Docker 環境が構築済みであること（UC-000-001 完了）
- バックエンドコンテナが起動していること

---

## 基本フロー

1. 開発者がバックエンドコンテナに入る
2. Laravel プロジェクトを作成する
3. DDD 用ディレクトリ構成を作成する
4. 必要なパッケージをインストールする
5. 環境設定ファイル（.env）を構成する
6. データベース接続を確認する
7. マイグレーションを実行する

---

## 技術要件

### インストールパッケージ

| パッケージ | バージョン | 用途 |
|-----------|-----------|------|
| laravel/sanctum | 4.x | SPA 認証 |
| larastan/larastan | 2.x | 静的解析 |
| pestphp/pest | 3.x | テストフレームワーク |
| pestphp/pest-plugin-laravel | 3.x | Pest Laravel 統合 |

### ディレクトリ構成

```
backend/
├── app/
│   └── src/                    # DDDソースコード配置場所
│       ├── BookManagement/     # 書籍管理コンテキスト（将来）
│       ├── LoanManagement/     # 貸出管理コンテキスト（将来）
│       ├── UserManagement/     # ユーザー管理コンテキスト（将来）
│       └── Common/             # 共有リソース
├── bootstrap/
├── config/
├── database/
├── public/
├── resources/
├── routes/
├── storage/
├── tests/
├── composer.json
├── phpstan.neon
└── phpunit.xml
```

---

## 事後条件

- Laravel プロジェクトが正常に動作すること
- `php artisan` コマンドが実行できること
- データベース接続が成功すること
- 静的解析が実行できること
- テストが実行できること

---

## 成果物

| 成果物 | 配置場所 |
|--------|---------|
| Laravel プロジェクト一式 | backend/ |
| DDD ディレクトリ構成 | backend/app/src/ |
| 静的解析設定 | backend/phpstan.neon |
| テスト設定 | backend/phpunit.xml |

---

## 関連 Use Case

| ID | Use Case 名 | 関係 |
|----|-------------|------|
| UC-000-001 | Docker 環境構築 | 本 Use Case の前提 |
| UC-000-004 | 開発環境動作確認 | 本 Use Case の後に実施 |
