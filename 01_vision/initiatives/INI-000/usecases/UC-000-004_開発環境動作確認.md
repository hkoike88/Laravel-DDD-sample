# UC-000-004: 開発環境動作確認

最終更新: 2025-12-23

---

## 概要

構築した開発環境が正常に動作することを確認する。フロントエンド、バックエンド、データベースの連携を検証し、開発開始可能な状態であることを保証する。

---

## アクター

| アクター | 役割 |
|----------|------|
| 開発者 | 開発環境の動作を確認する |

---

## 事前条件

- Docker 環境が構築済みであること（UC-000-001 完了）
- バックエンド初期設定が完了していること（UC-000-002 完了）
- フロントエンド初期設定が完了していること（UC-000-003 完了）

---

## 基本フロー

1. 開発者が `docker compose up -d` で全サービスを起動する
2. 開発者がフロントエンドにアクセスして表示を確認する
3. 開発者がバックエンド API にアクセスして応答を確認する
4. 開発者が phpMyAdmin でデータベース接続を確認する
5. 開発者がフロントエンドからバックエンド API を呼び出し、DB データを取得する
6. 開発者がテストを実行して全て成功することを確認する

---

## 確認項目

### サービス起動確認

| サービス | URL | 確認内容 |
|----------|-----|---------|
| フロントエンド | http://localhost:5173 | React アプリが表示される |
| バックエンド API | http://localhost:8000/api | JSON レスポンスが返る |
| phpMyAdmin | http://localhost:8080 | DB 管理画面が表示される |

### 連携確認

| 確認項目 | 方法 | 期待結果 |
|----------|------|---------|
| Backend → DB | マイグレーション実行 | テーブルが作成される |
| Frontend → Backend | API 呼び出し | データが取得できる |
| CORS 設定 | クロスオリジンリクエスト | エラーなく通信できる |

### テスト実行

| 対象 | コマンド | 期待結果 |
|------|---------|---------|
| バックエンド | `php artisan test` | 全テスト成功 |
| フロントエンド | `npm run test` | 全テスト成功 |
| 静的解析 | `./vendor/bin/phpstan analyse` | エラーなし |
| リント | `npm run lint` | エラーなし |

---

## 事後条件

- 全サービスが正常に動作していること
- フロントエンドからバックエンド経由でデータベースにアクセスできること
- 開発を開始できる状態であること

---

## トラブルシューティング

| 問題 | 原因 | 解決策 |
|------|------|--------|
| コンテナが起動しない | ポート競合 | 競合プロセスを停止 |
| DB 接続エラー | 環境変数誤り | .env ファイルを確認 |
| CORS エラー | 設定不足 | バックエンドの CORS 設定を確認 |
| 依存パッケージエラー | キャッシュ問題 | `npm ci` / `composer install` を再実行 |

---

## 関連 Use Case

| ID | Use Case 名 | 関係 |
|----|-------------|------|
| UC-000-001 | Docker 環境構築 | 前提条件 |
| UC-000-002 | バックエンド初期設定 | 前提条件 |
| UC-000-003 | フロントエンド初期設定 | 前提条件 |
