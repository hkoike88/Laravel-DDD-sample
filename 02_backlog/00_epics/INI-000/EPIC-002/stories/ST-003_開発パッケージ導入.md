# ST-003: 開発パッケージの導入

最終更新: 2025-12-23

---

## ストーリー

**開発者として**、開発に必要なパッケージ（認証、静的解析、テスト）を導入したい。
**なぜなら**、セキュアで品質の高いコードを効率的に開発したいからだ。

---

## 関連情報

| 項目 | 値 |
|------|-----|
| Epic | [EPIC-002: バックエンド初期設定](../epic.md) |
| ポイント | 2 |
| 優先度 | Must |
| ステータス | Draft |

---

## 受け入れ条件

1. [ ] Laravel Sanctum がインストールされていること
2. [ ] Larastan がインストールされていること
3. [ ] Pest がインストールされていること
4. [ ] 全てのパッケージが正常に動作すること
5. [ ] composer.lock がコミットされていること

---

## 技術仕様

### インストールするパッケージ

| パッケージ | バージョン | 用途 | 種別 |
|-----------|-----------|------|------|
| laravel/sanctum | 4.x | SPA 認証 | 本番 |
| larastan/larastan | 2.x | 静的解析 | 開発 |
| pestphp/pest | 3.x | テストフレームワーク | 開発 |
| pestphp/pest-plugin-laravel | 3.x | Pest Laravel 統合 | 開発 |
| nunomaduro/collision | 8.x | エラー表示改善 | 開発 |

### インストールコマンド

```bash
# 本番パッケージ
composer require laravel/sanctum

# 開発パッケージ
composer require --dev \
    larastan/larastan \
    pestphp/pest \
    pestphp/pest-plugin-laravel \
    nunomaduro/collision

# Sanctum の設定ファイル公開
php artisan vendor:publish --provider="Laravel\Sanctum\SanctumServiceProvider"

# Pest の初期化
./vendor/bin/pest --init
```

### 動作確認

```bash
# Sanctum 確認
php artisan route:list | grep sanctum

# Larastan 確認
./vendor/bin/phpstan --version

# Pest 確認
./vendor/bin/pest --version
```

---

## 成果物

| 成果物 | 配置場所 |
|--------|---------|
| 更新された composer.json | backend/composer.json |
| composer.lock | backend/composer.lock |
| Sanctum 設定 | backend/config/sanctum.php |
| Sanctum マイグレーション | backend/database/migrations/ |

---

## タスク

### Design Tasks（外部設計）

- [ ] 必要パッケージの洗い出し
- [ ] バージョン互換性の確認

### Spec Tasks（詳細設計）

- [ ] 本番パッケージのインストール
- [ ] 開発パッケージのインストール
- [ ] Sanctum 設定ファイルの公開
- [ ] Pest の初期化
- [ ] 動作確認

---

## 変更履歴

| 日付 | 変更内容 |
|------|---------|
| 2025-12-23 | 初版作成 |
