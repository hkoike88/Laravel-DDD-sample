# ST-001: 貸出エンティティの設計

最終更新: 2025-12-24

---

## ストーリー

**開発者として**、貸出を表現するエンティティを設計したい。
**なぜなら**、貸出・返却処理のドメインロジックを適切にカプセル化したいからだ。

---

## 関連情報

| 項目 | 値 |
|------|-----|
| Epic | [EPIC-003: 貸出処理](../epic.md) |
| ポイント | 3 |
| 優先度 | Must |
| ステータス | Draft |

---

## 受け入れ条件

1. [ ] Loan エンティティが作成されていること
2. [ ] LoanId 値オブジェクトが作成されていること
3. [ ] 貸出日・返却期限・返却日を保持できること
4. [ ] 貸出状態（貸出中・返却済み・延滞）を管理できること
5. [ ] 返却期限の自動計算ができること（貸出日 + 14日）

---

## タスク

### Design Tasks（外部設計）

- [ ] 貸出エンティティのクラス図作成
- [ ] 貸出状態遷移図の作成

### Spec Tasks（詳細設計）

- [ ] Loan エンティティの実装
- [ ] LoanId 値オブジェクトの実装
- [ ] LoanStatus 列挙型の実装
- [ ] ドメインサービス（延滞判定など）の実装
- [ ] 単体テストの作成

---

## 技術詳細

### エンティティ構成

```
Domain/Loan/
├── Loan.php              # 貸出エンティティ
├── LoanId.php            # 貸出ID（UUID）
├── LoanStatus.php        # 貸出状態（Enum）
├── LoanRepository.php    # リポジトリインターフェース
└── LoanDomainService.php # 延滞判定などのサービス
```

### 貸出状態

| 状態 | 説明 |
|------|------|
| borrowed | 貸出中 |
| returned | 返却済み |
| overdue | 延滞中 |

---

## 変更履歴

| 日付 | 変更内容 |
|------|---------|
| 2025-12-24 | 初版作成 |
