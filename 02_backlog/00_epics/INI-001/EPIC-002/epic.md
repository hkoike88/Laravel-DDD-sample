# EPIC-002: 職員ダッシュボード機能

最終更新: 2025-12-26

---

## 概要

ログイン済みの職員がダッシュボード画面を表示し、業務メニューにアクセスする機能を実装する。ダッシュボードには本日の業務サマリーと各機能へのナビゲーションが表示され、職員の権限に応じて表示内容が制御される。

---

## 関連情報

| 項目 | 値 |
|------|-----|
| イニシアチブ | [INI-001: 認証・利用者管理基盤](../../../../01_vision/initiatives/INI-001/charter.md) |
| Use Case | [UC-001-002: 職員ダッシュボード表示](../../../../01_vision/initiatives/INI-001/usecases/UC-001-002_職員ダッシュボード表示.md) |
| 優先度 | Must |
| ステータス | Planned |

---

## ビジネス価値

職員がログイン後に業務の全体像を把握し、必要な機能へスムーズにアクセスできるようにする。
本日の業務サマリー（貸出件数、返却件数、延滞図書数、予約待ち件数）を表示することで、業務状況の把握を支援する。

---

## 受け入れ条件

1. ログイン後にダッシュボード画面が表示されること
2. ヘッダーにログイン職員名とログアウトボタンが表示されること
3. 本日の業務サマリー（貸出・返却件数、延滞・予約件数）が表示されること
4. 業務メニュー（蔵書検索、蔵書登録、貸出・返却、予約管理、利用者管理）が表示されること
5. 管理者権限を持つ職員には管理メニュー（職員アカウント管理）が追加表示されること
6. 各メニューから対応する機能画面に遷移できること
7. ダッシュボード表示が2秒以内に完了すること

---

## 画面一覧

| 画面ID | 画面名 | パス | 説明 |
|--------|--------|------|------|
| SCR-001-002 | 職員ダッシュボード | `/staff/dashboard` | 業務サマリーとメニュー表示 |

---

## User Story 一覧

| ID | Story 名 | ポイント | 優先度 | ステータス |
|----|----------|---------|--------|----------|
| [ST-001](./stories/ST-001_ダッシュボードAPI実装.md) | ダッシュボード API の実装 | 2 | Must | Planned |
| [ST-002](./stories/ST-002_ダッシュボードUI実装.md) | ダッシュボード UI の実装 | 3 | Must | Planned |
| [ST-003](./stories/ST-003_権限別メニュー表示実装.md) | 権限別メニュー表示の実装 | 2 | Must | Planned |

---

## 成果物

| 成果物 | 配置場所 | 説明 |
|--------|---------|------|
| DashboardController | backend/app/Http/Controllers/Staff/DashboardController.php | ダッシュボードAPI |
| DashboardResource | backend/app/Http/Resources/DashboardResource.php | レスポンス形式 |
| DashboardPage | frontend/src/pages/staff/DashboardPage.tsx | ダッシュボード画面 |
| DashboardSummary | frontend/src/features/dashboard/components/ | サマリーコンポーネント |
| NavigationMenu | frontend/src/features/dashboard/components/ | ナビゲーションメニュー |
| StaffLayout | frontend/src/components/layout/ | 職員向け共通レイアウト |

---

## 技術仕様

### API エンドポイント

| メソッド | エンドポイント | 説明 | 認証 |
|----------|---------------|------|------|
| GET | `/api/staff/dashboard` | ダッシュボード情報取得 | 必須 |

### リクエスト/レスポンス

#### GET /api/staff/dashboard

**成功レスポンス (200):**
```json
{
  "summary": {
    "todayLoans": 15,
    "todayReturns": 12,
    "overdueBooks": 3,
    "pendingReservations": 8
  },
  "user": {
    "id": "01HV...",
    "name": "山田太郎",
    "role": "staff"
  }
}
```

### 画面構成

```
┌─────────────────────────────────────────────────────────────────┐
│  📚 青空市立中央図書館                         山田太郎 ▼     │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   📊 本日のサマリー                                             │
│   ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐              │
│   │ 貸出    │ │ 返却    │ │ 延滞    │ │ 予約待ち │              │
│   │  15件   │ │  12件   │ │   3件   │ │   8件   │              │
│   └─────────┘ └─────────┘ └─────────┘ └─────────┘              │
│                                                                 │
│   📋 業務メニュー                                               │
│   ┌─────────────┐ ┌─────────────┐ ┌─────────────┐              │
│   │ 🔍 蔵書検索  │ │ 📚 蔵書登録  │ │ 📤 貸出処理  │              │
│   └─────────────┘ └─────────────┘ └─────────────┘              │
│   ┌─────────────┐ ┌─────────────┐ ┌─────────────┐              │
│   │ 📥 返却処理  │ │ 📅 予約管理  │ │ 👤 利用者管理 │              │
│   └─────────────┘ └─────────────┘ └─────────────┘              │
│                                                                 │
│   ⚙️ 管理メニュー（管理者のみ）                                  │
│   ┌─────────────┐                                               │
│   │ 👥 職員管理  │                                               │
│   └─────────────┘                                               │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 権限別表示制御

| メニュー | 一般職員 | 管理者 |
|---------|:--------:|:------:|
| 蔵書検索 | ○ | ○ |
| 蔵書登録 | ○ | ○ |
| 貸出処理 | ○ | ○ |
| 返却処理 | ○ | ○ |
| 予約管理 | ○ | ○ |
| 利用者管理 | ○ | ○ |
| 職員管理 | ✗ | ○ |

---

## 依存関係

### 前提条件

| Epic ID | Epic 名 | 関係 |
|---------|---------|------|
| EPIC-001 | 職員ログイン機能 | ログイン機能が完了していること |

### 後続タスク

| Epic ID | Epic 名 | 関係 |
|---------|---------|------|
| EPIC-003 | 職員ログアウト機能 | ダッシュボードからログアウト |
| EPIC-004〜 | 各業務機能 | ダッシュボードから遷移 |

---

## 非機能要件

| 項目 | 要件 |
|------|------|
| パフォーマンス | ダッシュボード表示は2秒以内に完了する |
| 可用性 | 図書館開館時間中は利用可能 |
| アクセシビリティ | キーボードナビゲーション対応 |
| アクセシビリティ | スクリーンリーダー対応 |

---

## ビジネスルール

| ルールID | ルール内容 |
|----------|-----------|
| BR-UC001-02-01 | 職員権限に応じて表示メニューを制御する |
| BR-UC001-02-02 | 管理者のみ職員管理メニューを表示する |
| BR-UC001-02-03 | サマリー情報はリアルタイム取得（キャッシュなし） |

---

## 関連ドキュメント

- [UC-001-002: 職員ダッシュボード表示](../../../../01_vision/initiatives/INI-001/usecases/UC-001-002_職員ダッシュボード表示.md)
- [UC-001-001: 職員ログイン](../../../../01_vision/initiatives/INI-001/usecases/UC-001-001_職員ログイン.md)
- [ワイヤーフレーム: 職員ダッシュボード](../../../../01_vision/initiatives/INI-001/ui/wireframes/staff-dashboard.md)
- [フロントエンド アーキテクチャ設計](../../../../00_docs/20_tech/20_architecture/frontend/01_ArchitectureDesign.md)

---

## 変更履歴

| 日付 | 変更内容 |
|------|---------|
| 2025-12-26 | 初版作成 |
