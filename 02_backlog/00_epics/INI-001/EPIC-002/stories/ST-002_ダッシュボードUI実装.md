# ST-002: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ UI ã®å®Ÿè£…

æœ€çµ‚æ›´æ–°: 2025-12-26

---

## ã‚¹ãƒˆãƒ¼ãƒªãƒ¼

**å›³æ›¸é¤¨è·å“¡ã¨ã—ã¦**ã€ãƒ­ã‚°ã‚¤ãƒ³å¾Œã«ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’ç¢ºèªã—ãŸã„ã€‚
**ãªãœãªã‚‰**ã€æœ¬æ—¥ã®æ¥­å‹™çŠ¶æ³ã‚’æŠŠæ¡ã—ã€å¿…è¦ãªæ©Ÿèƒ½ã«ã™ãã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã„ã‹ã‚‰ã ã€‚

---

## é–¢é€£æƒ…å ±

| é …ç›® | å€¤ |
|------|-----|
| Epic | [EPIC-002: è·å“¡ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ©Ÿèƒ½](../epic.md) |
| ãƒã‚¤ãƒ³ãƒˆ | 3 |
| å„ªå…ˆåº¦ | Must |
| ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | Planned |
| ãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ  | [è·å“¡ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰](../../../../../01_vision/initiatives/INI-001/ui/wireframes/staff-dashboard.md) |

---

## å—ã‘å…¥ã‚Œæ¡ä»¶

1. [ ] ãƒ˜ãƒƒãƒ€ãƒ¼ã«ãƒ­ã‚°ã‚¤ãƒ³è·å“¡åãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨
2. [ ] ãƒ˜ãƒƒãƒ€ãƒ¼ã«ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨
3. [ ] æœ¬æ—¥ã®ã‚µãƒãƒªãƒ¼ï¼ˆè²¸å‡ºãƒ»è¿”å´ãƒ»å»¶æ»ãƒ»äºˆç´„ï¼‰ãŒã‚«ãƒ¼ãƒ‰å½¢å¼ã§è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨
4. [ ] æ¥­å‹™ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒã‚°ãƒªãƒƒãƒ‰å½¢å¼ã§è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨
5. [ ] å„ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨å¯¾å¿œã™ã‚‹ç”»é¢ã«é·ç§»ã™ã‚‹ã“ã¨
6. [ ] ãƒ‡ãƒ¼ã‚¿å–å¾—ä¸­ã¯ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨
7. [ ] ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼æ™‚ã¯ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨
8. [ ] ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã«å¯¾å¿œã—ã¦ã„ã‚‹ã“ã¨

---

## ç”»é¢ä»•æ§˜

### UI è¦ç´ 

| è¦ç´ ID | ç¨®é¡ | è¦ç´ å | èª¬æ˜ |
|--------|------|--------|------|
| header | header | ãƒ˜ãƒƒãƒ€ãƒ¼ | ãƒ­ã‚´ã€è·å“¡åã€ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ |
| user-name | text | è·å“¡å | ãƒ­ã‚°ã‚¤ãƒ³ä¸­ã®è·å“¡å |
| btn-logout | button | ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ | ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†ã‚’å®Ÿè¡Œ |
| summary-cards | section | ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰ | æ¥­å‹™ã‚µãƒãƒªãƒ¼è¡¨ç¤º |
| card-loans | div | è²¸å‡ºä»¶æ•° | æœ¬æ—¥ã®è²¸å‡ºä»¶æ•° |
| card-returns | div | è¿”å´ä»¶æ•° | æœ¬æ—¥ã®è¿”å´ä»¶æ•° |
| card-overdue | div | å»¶æ»ä»¶æ•° | å»¶æ»ä¸­ã®å›³æ›¸æ•° |
| card-reservations | div | äºˆç´„ä»¶æ•° | äºˆç´„å¾…ã¡ä»¶æ•° |
| menu-grid | section | æ¥­å‹™ãƒ¡ãƒ‹ãƒ¥ãƒ¼ | æ¥­å‹™æ©Ÿèƒ½ã¸ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ |
| admin-menu | section | ç®¡ç†ãƒ¡ãƒ‹ãƒ¥ãƒ¼ | ç®¡ç†è€…å‘ã‘ãƒ¡ãƒ‹ãƒ¥ãƒ¼ |

### ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰

| ã‚«ãƒ¼ãƒ‰ | ã‚¢ã‚¤ã‚³ãƒ³ | ãƒ©ãƒ™ãƒ« | å€¤ã®ä¾‹ |
|--------|---------|--------|--------|
| è²¸å‡º | ğŸ“¤ | æœ¬æ—¥ã®è²¸å‡º | 15ä»¶ |
| è¿”å´ | ğŸ“¥ | æœ¬æ—¥ã®è¿”å´ | 12ä»¶ |
| å»¶æ» | âš ï¸ | å»¶æ»ä¸­ | 3ä»¶ |
| äºˆç´„ | ğŸ“… | äºˆç´„å¾…ã¡ | 8ä»¶ |

### æ¥­å‹™ãƒ¡ãƒ‹ãƒ¥ãƒ¼

| ãƒ¡ãƒ‹ãƒ¥ãƒ¼ | ã‚¢ã‚¤ã‚³ãƒ³ | ãƒ©ãƒ™ãƒ« | é·ç§»å…ˆ |
|---------|---------|--------|--------|
| è”µæ›¸æ¤œç´¢ | ğŸ” | è”µæ›¸æ¤œç´¢ | `/staff/books/search` |
| è”µæ›¸ç™»éŒ² | ğŸ“š | è”µæ›¸ç™»éŒ² | `/staff/books/new` |
| è²¸å‡ºå‡¦ç† | ğŸ“¤ | è²¸å‡ºå‡¦ç† | `/staff/loans/new` |
| è¿”å´å‡¦ç† | ğŸ“¥ | è¿”å´å‡¦ç† | `/staff/returns` |
| äºˆç´„ç®¡ç† | ğŸ“… | äºˆç´„ç®¡ç† | `/staff/reservations` |
| åˆ©ç”¨è€…ç®¡ç† | ğŸ‘¤ | åˆ©ç”¨è€…ç®¡ç† | `/staff/patrons` |

---

## æŠ€è¡“ä»•æ§˜

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆ

```
DashboardPage
â”œâ”€â”€ StaffLayout
â”‚   â”œâ”€â”€ Header
â”‚   â”‚   â”œâ”€â”€ Logo
â”‚   â”‚   â”œâ”€â”€ UserMenu
â”‚   â”‚   â””â”€â”€ LogoutButton
â”‚   â””â”€â”€ Main
â”‚       â”œâ”€â”€ SummarySection
â”‚       â”‚   â””â”€â”€ SummaryCard (x4)
â”‚       â”œâ”€â”€ MenuSection
â”‚       â”‚   â””â”€â”€ MenuCard (x6)
â”‚       â””â”€â”€ AdminMenuSection (æ¡ä»¶ä»˜ã)
â”‚           â””â”€â”€ MenuCard
```

### useDashboard Hook

```typescript
// useDashboard.ts
import { useQuery } from '@tanstack/react-query';
import { dashboardApi } from '@/features/dashboard/api';

export const useDashboard = () => {
  return useQuery({
    queryKey: ['dashboard'],
    queryFn: dashboardApi.getDashboard,
    staleTime: 0, // å¸¸ã«æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
  });
};
```

### DashboardPage ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```tsx
// DashboardPage.tsx
export const DashboardPage: React.FC = () => {
  const { data, isLoading, error } = useDashboard();
  const user = useAuthStore((state) => state.user);

  if (isLoading) {
    return <LoadingSpinner />;
  }

  if (error) {
    return <ErrorMessage message="ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ" />;
  }

  return (
    <div className="dashboard">
      <SummarySection summary={data.summary} />
      <MenuSection />
      {user?.role === 'admin' && <AdminMenuSection />}
    </div>
  );
};
```

### SummaryCard ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```tsx
// SummaryCard.tsx
interface SummaryCardProps {
  icon: string;
  label: string;
  value: number;
  variant?: 'default' | 'warning';
}

export const SummaryCard: React.FC<SummaryCardProps> = ({
  icon,
  label,
  value,
  variant = 'default',
}) => {
  return (
    <div className={`summary-card summary-card--${variant}`}>
      <span className="summary-card__icon">{icon}</span>
      <span className="summary-card__label">{label}</span>
      <span className="summary-card__value">{value}ä»¶</span>
    </div>
  );
};
```

---

## æˆæœç‰©

| æˆæœç‰© | é…ç½®å ´æ‰€ |
|--------|---------|
| DashboardPage | frontend/src/pages/staff/DashboardPage.tsx |
| SummarySection | frontend/src/features/dashboard/components/SummarySection.tsx |
| SummaryCard | frontend/src/features/dashboard/components/SummaryCard.tsx |
| MenuSection | frontend/src/features/dashboard/components/MenuSection.tsx |
| MenuCard | frontend/src/features/dashboard/components/MenuCard.tsx |
| useDashboard | frontend/src/features/dashboard/hooks/useDashboard.ts |
| dashboardApi | frontend/src/features/dashboard/api/dashboardApi.ts |
| StaffLayout | frontend/src/components/layout/StaffLayout.tsx |
| ãƒ†ã‚¹ãƒˆ | frontend/src/features/dashboard/\_\_tests\_\_/ |

---

## ã‚¿ã‚¹ã‚¯

### Design Tasksï¼ˆå¤–éƒ¨è¨­è¨ˆï¼‰

- [ ] ãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ ã®ç¢ºèª
- [ ] ã‚«ãƒ©ãƒ¼ã‚¹ã‚­ãƒ¼ãƒ ã®ç¢ºå®š
- [ ] ã‚¢ã‚¤ã‚³ãƒ³ã®é¸å®š

### Spec Tasksï¼ˆè©³ç´°è¨­è¨ˆï¼‰

- [ ] dashboardApi å®Ÿè£…
- [ ] useDashboard ãƒ•ãƒƒã‚¯å®Ÿè£…
- [ ] SummaryCard ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
- [ ] SummarySection ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
- [ ] MenuCard ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
- [ ] MenuSection ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
- [ ] StaffLayout å®Ÿè£…
- [ ] DashboardPage å®Ÿè£…
- [ ] ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­å®š
- [ ] ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆä½œæˆ

---

## å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | å¤‰æ›´å†…å®¹ |
|------|---------|
| 2025-12-26 | åˆç‰ˆä½œæˆ |
