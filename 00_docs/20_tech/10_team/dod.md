# 完成の定義（Definition of Done）

<!--
「完了」と言えるために満たすべき基準
チーム全員で合意し、すべての作業に適用します
-->

最終更新: 2024-04-01

## 概要

このドキュメントは、ストーリー・タスク・バグ修正等が「完了」と言える状態を定義します。
すべての作業項目は、このチェックリストを満たして初めて「Done」とみなされます。

## DoD チェックリスト

### 1. コード品質

- [ ] **コードレビュー完了**
  - 少なくとも1名以上のレビュアーによる承認
  - レビューコメントにすべて対応済み

- [ ] **静的解析ツールでエラーなし**
  - ESLint でエラー・警告なし
  - 型チェック（TypeScript）でエラーなし

- [ ] **コーディング規約に準拠**
  - [コーディング標準](../../00_docs/80_standards/coding/) に準拠
  - 命名規則、フォーマットを遵守

### 2. テスト

- [ ] **単体テスト実装・パス**
  - 新規コードに対するユニットテスト作成
  - すべてのテストケースが成功

- [ ] **動作確認完了**
  - 開発環境での動作確認
  - 主要なシナリオでの確認

- [ ] **回帰テストパス**
  - 既存機能への影響がないことを確認
  - 自動テストスイートが全てパス

### 3. ドキュメント

- [ ] **必要に応じてドキュメント更新**
  - 使い方、設定方法の更新
  - 複雑なロジックにはコメント追加

### 4. 受入

- [ ] **受入基準をすべて満たしている**
  - ストーリーの受入基準（Acceptance Criteria）をすべて満たす

- [ ] **PO（プロダクトオーナー）の受入確認**
  - PO による動作確認完了
  - PO からの承認取得

---

## MVP フェーズ用 簡易 DoD

Sprint 1〜5（MVP開発期間）は、以下の簡易版を適用します。

### 必須チェック項目

| # | 項目 | 確認者 |
|---|------|-------|
| 1 | コードレビュー承認済み | 開発者 |
| 2 | 単体テストが通る | 開発者 |
| 3 | 開発環境で動作確認済み | 開発者 |
| 4 | 受入基準をすべて満たす | 開発者 |
| 5 | PO が確認・承認 | PO |

### PR テンプレート

```markdown
## 変更内容
<!-- 何を変更したか簡潔に -->

## 対象ストーリー
<!-- ST-XXX: ストーリー名 -->

## DoD チェックリスト
- [ ] コードレビュー承認済み
- [ ] 単体テストが通る
- [ ] 開発環境で動作確認済み
- [ ] 受入基準をすべて満たす
- [ ] PO が確認・承認
```

---

## 例外

以下の場合は、一部の基準を満たさなくても完了とみなせます:

| ケース | 緩和内容 | 条件 |
|-------|---------|------|
| 緊急バグ修正 | 単体テスト後付け可 | 翌スプリントで補完 |
| ドキュメントのみ変更 | テスト不要 | - |
| スパイク（調査） | テスト・レビュー不要 | 結果をレポート |

※例外適用時は、その理由を PR に明記すること

---

## 今後の拡張（Phase 2 以降）

MVP 完了後、以下を追加検討：

- テストカバレッジ基準（80%以上）
- ステージング環境での動作確認
- セキュリティチェック
- パフォーマンス確認
- API仕様書更新

---

## 変更履歴

| 日付 | 変更内容 | 承認者 |
|------|---------|-------|
| 2024-04-01 | 初版作成（MVP用簡易版） | チーム全員 |

---

**責任者**: 鈴木 あかり（スクラムマスター）
**次回レビュー**: 2024-07-01（MVP完了時）
